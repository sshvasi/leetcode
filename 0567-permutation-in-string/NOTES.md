Используем две хэш-таблицы и два указателя. В одну хэш-таблицу запишем частоту появления символов искомой строки, другую будем использовать для поиска подходящей подстроки в другой строке.
​
На каждой итерации добавляем во вторую хэш-таблицу символ под правым указателем и если набрали достаточно символов этого типа, увеличиваем счётчик. Когда набрали достаточное количество символов каждого типа, проверяем, набрали ли мы его из подстроки подходящей длины. Если длина подстроки не больше длины искомой строки, устанавливаем флаг в `true`. Независимо от длины подстроки сдвигаем левый указатель и удаляем символ под ним.